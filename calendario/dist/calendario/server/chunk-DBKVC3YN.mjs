import './polyfills.server.mjs';
import{H as V,I as A,J as R,K as H,L as J,M as z,N as U,O as L,R as W,V as q,Y as D,a as E,b as g,c as S,d as v,e as _,f as N,g as P,h as l,i as k,j as d,k as m,l as c,m as a,n as M,o as b,p as w,q as T,r as j,s,t as Y,u,v as x,w as $,x as K,y as B,z as O}from"./chunk-TSF76CSZ.mjs";var tt=[],G=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=_({type:t}),t.\u0275inj=g({imports:[D.forRoot(tt),D]});let n=t;return n})();var Q=(()=>{let t=class t{constructor(e){this.http=e,this.apiUrl="http://localhost:8080/api/calendario/listar"}getCalendars(){return this.http.get(this.apiUrl)}};t.\u0275fac=function(i){return new(i||t)(S(J))},t.\u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var nt=()=>["Dom","Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b"];function it(n,t){if(n&1&&(c(0,"th"),u(1),a()),n&2){let r=t.$implicit;l(),x(r)}}function rt(n,t){if(n&1&&(c(0,"div")(1,"p"),u(2),a(),c(3,"p"),u(4),a()()),n&2){let r,e=s().$implicit,i=s(3).$implicit,o=s(2);l(2),x(e.getDate()),l(2),x(((r=o.findCalendarDay(o.filteredCalendars[i],e.getDate()))==null||r.tipo==null?null:r.tipo.tipo)||"")}}function ot(n,t){n&1&&M(0,"p")}function at(n,t){if(n&1&&(b(0),c(1,"td",11),d(2,rt,5,2,"div",12)(3,ot,1,0,"ng-template",null,1,O),a(),w()),n&2){let r,e=t.$implicit,i=Y(4),o=s(3).$implicit,p=s(2);l(),m("ngClass",p.getCalendarItemClass(p.findCalendarDay(p.filteredCalendars[o],(r=e&&e.getDate()===1?1:e==null?null:e.getDate())!==null&&r!==void 0?r:-1))),l(),m("ngIf",e&&e.getFullYear()!==1900)("ngIfElse",i)}}function lt(n,t){if(n&1&&(c(0,"tr"),d(1,at,5,3,"ng-container",10),a()),n&2){let r=t.$implicit;l(),m("ngForOf",r)}}function ct(n,t){if(n&1&&(b(0),c(1,"h2"),u(2),a(),c(3,"table",9)(4,"thead")(5,"tr"),d(6,it,2,1,"th",10),a()(),c(7,"tbody"),d(8,lt,2,1,"tr",10),a()(),w()),n&2){let r=s().$implicit,e=s(2);l(2),x(e.getMonthName(r)),l(4),m("ngForOf",$(3,nt)),l(2),m("ngForOf",e.getMonthDays(e.parseMonthKey(r),e.filterYear))}}function pt(n,t){if(n&1&&(c(0,"div",8),d(1,ct,9,4,"ng-container",6),a()),n&2){let r=t.$implicit,e=s(2);l(),m("ngIf",e.filteredCalendars[r])}}function st(n,t){if(n&1&&(b(0),d(1,pt,2,1,"div",7),w()),n&2){let r=s();l(),m("ngForOf",r.monthsOrder)}}function dt(n,t){n&1&&(c(0,"p",13),u(1,"No se encontraron calendarios para el a\xF1o especificado."),a())}var X=(()=>{let t=class t{constructor(e){this.calendarService=e,this.calendars=[],this.filteredCalendars={},this.filterYear=null,this.monthsOrder=["0","1","2","3","4","5","6","7","8","9","10","11"]}ngOnInit(){this.loadCalendars()}loadCalendars(){this.calendarService.getCalendars().subscribe(e=>{this.calendars=e,this.applyFilter()},e=>{console.error("Error fetching calendars",e)})}applyFilter(){if(this.filterYear){let e=this.calendars.filter(i=>i.year===this.filterYear);this.filteredCalendars=this.groupByMonth(e)}else this.filteredCalendars=this.groupByMonth(this.calendars)}onYearFilterChange(e){let i=e.target;this.filterYear=i.value?parseInt(i.value,10):null,this.applyFilter()}groupByMonth(e){return e.reduce((i,o)=>{let p=new Date(o.fecha).getMonth().toString();return i[p]||(i[p]=[]),i[p].push(o),i},{})}getCalendarItemClass(e){if(e&&e.tipo&&e.tipo.tipo)switch(e.tipo.tipo.trim()){case"Fin de Semana":return"weekend";case"D\xEDa laboral":return"workday";case"D\xEDa festivo":return"holiday";default:return""}else return""}getMonthName(e){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(e,10)]}parseMonthKey(e){return parseInt(e,10)}getMonthDays(e,i){let o=new Date(i,e+1,0).getDate(),p=new Date(i,e,1).getDay(),I=[];for(let C=1;C<=o;C++)I.push(new Date(i,e,C));let h=[],f=new Array(p).fill(null);if(I.forEach(C=>{f.push(C),f.length===7&&(h.push(f),f=[])}),f.length>0){for(;f.length<7;)f.push(null);h.push(f)}return h}findCalendarDay(e,i){return e.find(o=>new Date(o.fecha).getDate()===i)}};t.\u0275fac=function(i){return new(i||t)(k(Q))},t.\u0275cmp=v({type:t,selectors:[["app-calendario"]],decls:9,vars:3,consts:[["noCalendars",""],["emptyCell",""],[1,"calendar-container"],[1,"filter-section"],["for","yearFilter",1,"filter-label"],["type","number","id","yearFilter","placeholder","Ingrese el a\xF1o",1,"filter-input",3,"input"],[4,"ngIf"],["class","month-container",4,"ngFor","ngForOf"],[1,"month-container"],[1,"calendar-table"],[4,"ngFor","ngForOf"],[3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"no-calendars"]],template:function(i,o){if(i&1){let p=T();c(0,"div",2)(1,"div",3)(2,"label",4),u(3,"Filtrar por A\xF1o:"),a(),c(4,"input",5),j("input",function(h){return N(p),P(o.onYearFilterChange(h))}),a()(),d(5,st,2,1,"ng-container",6),K(6,"keyvalue"),d(7,dt,2,0,"ng-template",null,0,O),a()}i&2&&(l(5),m("ngIf",B(6,1,o.filteredCalendars)))},dependencies:[V,A,R,H],styles:[".calendar-container[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:20px;padding:20px;border-radius:10px;background:#f9f9f9;box-shadow:0 4px 8px #0000001a}.filter-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.filter-label[_ngcontent-%COMP%]{margin-right:10px;font-weight:700}.filter-input[_ngcontent-%COMP%]{padding:10px;border-radius:5px;border:1px solid #ccc;width:200px;font-size:16px}.month-container[_ngcontent-%COMP%]{margin-bottom:40px}.calendar-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.calendar-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .calendar-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:14.28%;border:1px solid #ddd;text-align:center;padding:10px;vertical-align:top}.weekend[_ngcontent-%COMP%]{background-color:#d4f7d4}.workday[_ngcontent-%COMP%]{background-color:#d4e8f7}.holiday[_ngcontent-%COMP%]{background-color:#f7d4d4}.no-calendars[_ngcontent-%COMP%]{color:#e74c3c;font-weight:700;text-align:center;margin-top:20px}"]});let n=t;return n})();var F=(()=>{let t=class t{constructor(){this.title="calendario"}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=v({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(i,o){i&1&&M(0,"app-calendario")(1,"router-outlet")},dependencies:[q,X]});let n=t;return n})();var Z=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=_({type:t,bootstrap:[F]}),t.\u0275inj=g({providers:[L()],imports:[U,G,z]});let n=t;return n})();var ft=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=_({type:t,bootstrap:[F]}),t.\u0275inj=g({imports:[Z,W]});let n=t;return n})();export{ft as a};
